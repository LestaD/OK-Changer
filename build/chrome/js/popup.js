popup={storage:{},setts:{},decor:{},styles:{},debug:!0,log:function(a){popup.debug&&("object"==typeof a?(console.log("OKCHp: [object]"),console.log(a)):console.log("OKCHp: "+a))},error:function(a){popup.debug&&("object"==typeof a?(console.error("OKCHp: [object]"),console.error(a)):console.error("OKCHp: "+a))},saving:function(a){chrome.storage.local.set(popup.storage,function(){});popup.log(popup.storage);chrome.runtime.sendMessage({method:"sendDataToInjected",data:{method:"updateAll",data:popup.storage}},
function(a){});a&&a.preventDefault()},hideAll:function(){$("#settings_block").hide();$("#decor_block").hide();$("#styles_block").hide()}};
popup.setts.show=function(a){popup.hideAll();$("#settings_block").show();a&&a.preventDefault();$("#s_buttonsize").attr("title","\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u0445");$("#s_avatardown").attr("title","\u041a\u0430\u043a \u0431\u044b\u043b\u043e \u0440\u0430\u043d\u044c\u0448\u0435");$("#s_stylescircle").attr("title","\u0412\u044b\u0431\u043e\u0440 \u0446\u0432\u0435\u0442\u0430 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430");
$("#s_minimize").attr("title","\u0414\u043b\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b")};
popup.setts.load=function(){for(var a in popup.storage)1==popup.storage[a]&&"s_"==a.substr(0,2)&&$("#"+a).addClass("pb_active");$("#hidingblocks_accord").accordion({collapsible:!0,d_active:!1,heightStyle:"content"});$("#l_pagetransp").slider({range:"min",min:0,max:100,value:popup.storage.l_pagetransp,slide:function(a,c){popup.storage.l_pagetransp=c.value;popup.saving()}})};
popup.setts.clicked=function(a){var b=$(this),c=b.attr("id")+"";b.hasClass("pb_active")?(b.removeClass("pb_active"),popup.storage[c]=0):(b.addClass("pb_active"),popup.storage[c]=1);popup.saving();a.preventDefault()};popup.decor.show=function(a){popup.hideAll();$("#decor_block").show();a&&a.preventDefault()};
popup.decor.load=function(){$("#dc_none, #dc_default").click(popup.decor.clicked);$.ajax({url:"http://ok.onlife.mobi/decor/",dataType:"json",success:function(a){if(0>=a.error)if(0<a.decor.length){popup.log("decor_ajax 1");for(var b=0;b<a.decor.length;b++){var c=a.decor[b];$('<div id="dec_'+c.id+'" class="decbutton" />').attr("style",popup.storage.th_url?"background: url("+popup.storage.th_url+"');":"none").attr("data-url",c.url).attr("data-id",c.id).attr("data-skip","none").html('<div class="decbg" style="background-image: url(\''+
c.url+"');\">"+c.name+"</div>").appendTo("#decor_block")}$("#decor_block").on("click",".decbutton",popup.decor.clicked)}else $("#decor_block").append("<center>\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043d\u0435\u0442 \u0441\u0442\u0438\u043b\u0435\u0439!<br/>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0432\u0435\u0434\u0443\u0442\u0441\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b!<br/></center>");else $("#decor_block").append("<center>\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0432\u0435\u0434\u0443\u0442\u0441\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b!</center>")},
error:function(){$("#decor_block").html("<center>\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c!</br>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443 \u0432\u0430\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443!</center>")}})};
popup.decor.clicked=function(a){var b=$(this);popup.storage.dec_id=parseInt(b.attr("data-id"));popup.storage.dec_url=b.attr("data-url");popup.saving();a.preventDefault()};popup.styles.show=function(a){popup.hideAll();$("#styles_block").show();a&&a.preventDefault()};
popup.styles.load=function(){$("#st_none, #st_default").off("click").click(popup.styles.clicked);$.ajax({url:"http://ok.onlife.mobi/styles/",dataType:"json",success:function(a){if(0>=a.error)if(0<a.styles.length){for(var b=0;b<a.styles.length;b++){var c=a.styles[b];$('<div id="st_'+c.id+'" class="stylebutton" />').attr("data-url",c.url).attr("data-id",c.id).attr("data-skip","none").attr("style","background-image: url('"+c.preview+"');").html('<div class="stylebg">'+c.title+"</div>").appendTo("#styles_block")}$("#styles_block").on("click",
".stylebutton",popup.styles.clicked)}else $("#styles_block").append("<center>\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043d\u0435\u0442 \u0441\u0442\u0438\u043b\u0435\u0439!<br/>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0432\u0435\u0434\u0443\u0442\u0441\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b!<br/></center>");else $("#styles_block").append("<center>\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0432\u0435\u0434\u0443\u0442\u0441\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b!</center>")},
error:function(){$("#styles_block").html("<center>\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c!</br>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443 \u0432\u0430\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443!</center>")}})};
popup.styles.clicked=function(a){var b=$(this);popup.storage.st_id=parseInt(b.attr("data-id"));popup.storage.st_url=b.attr("data-url");popup.saving();a.preventDefault()};
popup.ready=function(){chrome.storage.local.get(null,function(a){popup.storage=clones(a);popup.log(popup.storage);popup.setts.load();popup.decor.load();popup.styles.load()});popup.setts.show();$(".progbutton").click(popup.setts.clicked);$("#save_settings").click(popup.saving);$("#nav_setts").click(popup.setts.show);$("#nav_decor").click(popup.decor.show);$("#nav_styles").click(popup.styles.show)};document.addEventListener("DOMContentLoaded",popup.ready);
